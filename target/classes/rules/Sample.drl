package com.sample
 
import com.sample.Presenter;
import com.sample.DialogView;

global Presenter presenter;


declare Question
	question : String
	answerList : String[]
	answer : String
end

function Question resolveQuestion(String question, String[] answerList, Presenter presenter){
			Question newQuestion = new Question();
			newQuestion.setQuestion(question);
			newQuestion.setAnswerList(answerList);
	        newQuestion.setAnswer(new DialogView(question, answerList).start());
	        presenter.logAnswer(question, answerList, newQuestion.getAnswer());
	        return newQuestion;
}
 
rule "SciFi or Fantasy"
    when
       
    then
    	insert (resolveQuestion("SciFi or Fantasy", new String[]{"SciFi", "Fantasy"}, presenter));
end

rule "SciFi"
    when
        questionPrevious : Question(question == "SciFi or Fantasy" && answer == "SciFi")
    then
    	Question result = resolveQuestion("Samoloty czy statki", new String[]{"Samoloty", "Statki"}, presenter);
        insert (result);
        presenter.displayFinalScreen(result.getAnswer(), "src/main/resources/aed.png");
end

rule "Fantasy"
    when       
        questionPrevious : Question(question == "SciFi or Fantasy" && answer == "Fantasy")
    then
    	Question result = resolveQuestion("Smoki czy koty", new String[]{"Smoki", "koty"}, presenter);
        insert (result); 
        presenter.displayFinalScreen(result.getAnswer(), "src/main/resources/photo.jpg");
end

